/* ===== Stellschrauben ===== */
:root{
  --hero-h: 120svh;
  /* Szene jetzt volle Viewport-Breite (keine seitlichen gaps) */
  --scene-w: 100vw;
  --scene-ratio: 16/9;

  /* Linke Insel (Kopenhagen) */
  --left-w: 172%;
  --left-left: -29%;
  --left-bottom: -29%;

  /* Rechte Insel (Malmö) */
  --right-w: 172%;
  --right-right: -48%;
  --right-bottom: -14%;

  /* Brücke */
  --bridge-w: 65%;
  --bridge-bottom: 0%;             /* kleiner = tiefer */
  --bridge-shift: -32%;            /* -34% = weiter rechts */
}

/* ===== Basis ===== */
*{ box-sizing: border-box; font-family: "Inter", system-ui, sans-serif; }
html, body{ height:100%; margin:0; }
body{
  color:#0a223a;
  background:
    radial-gradient(1200px 800px at 50% -10%, rgba(255,255,255,.2), transparent 60%),
    linear-gradient(180deg, #bfe9ff 0%, #74c1ff 45%, #3da0ff 100%);
  background-attachment: fixed;
  overflow-x: hidden;
}

/* ===== Hero ===== */
.hero{
  position: relative;
  height: var(--hero-h);
  display: grid;
  grid-template-rows: auto auto 1fr;
  justify-items: center;
  padding-top: clamp(28px, 6vh, 72px);
  overflow: visible; /* geändert: Canvas darf sichtbar sein */
  isolation: isolate;
}

/* Titel & Toggle */
.hero__title{
  margin:0 12px; color:#fff; font-weight:800;
  font-size:clamp(40px, 7.5vw, 86px); text-align:center; letter-spacing:.5px;
  text-shadow: 0 3px 6px rgba(0,0,0,.30), 0 12px 32px rgba(0,50,120,.35);
  position: relative; z-index:3;
}
.hero__toggle{
  position: relative; z-index:3;
  display:flex; gap:clamp(36px, 5vw, 64px);
  margin-top: clamp(14px, 2.4vh, 22px);
}
.pill{
  border:0; border-radius:12px; cursor:pointer;
  padding:.7rem 1.2rem; font-weight:800; font-size:clamp(15px, 2.2vw, 20px);
  background:#c8f0d7; color:#1a3a2a;
  box-shadow: 0 8px 22px rgba(0,0,0,.14), 0 1px 0 rgba(255,255,255,.55) inset;
}

/* Bühne mit explizitem Abschneiden */
.scene{
  position: relative;
  width: var(--scene-w);
  max-width: none;        /* entfernen eventueller Beschränkung */
  aspect-ratio: var(--scene-ratio);
  margin-top: clamp(12px, 3vh, 28px);
  z-index: 1;
  overflow: hidden;
  margin-left: 0;
  margin-right: 0;
  left: 50%;
  transform: translateX(-50%); /* zentriert in Bezug auf viewport */
}

/* Gemeinsame Bild-Styles */
.scene img{
  position: absolute;
  user-select: none;
  pointer-events: none;
  filter:
    drop-shadow(0 28px 44px rgba(0,40,80,.28))
    drop-shadow(0 10px 18px rgba(0,0,0,.14));
}

/* Linke Insel */
.island--left{
  width: var(--left-w);
  left: var(--left-left);
  bottom: var(--left-bottom);
  transform: rotate(-2deg);
  transform-origin: left bottom;
  z-index: 1;
}

/* Rechte Insel */
.island--right{
  width: var(--right-w);
  right: var(--right-right);
  bottom: var(--right-bottom);
  transform: rotate(2deg);
  transform-origin: right bottom;
  z-index: 1;
}

/* Brücke */
.bridge{
  width: var(--bridge-w);
  left: 50%;
  bottom: var(--bridge-bottom);
  transform: translateX(var(--bridge-shift)) rotate(0.3deg);
  z-index: 2; /* über Inseln, unter Titel/Buttons */
  filter:
    drop-shadow(0 24px 36px rgba(0,30,60,.40))
    drop-shadow(0 8px 16px rgba(0,0,0,.18));
}

/* ===== Mobile Feinschliff ===== */
@media (max-width: 640px){
  :root{
    --scene-ratio: 16/10;
    --left-w: 70%;  --left-left: -14%; --left-bottom: -6%;
    --right-w: 72%; --right-right: -16%; --right-bottom: -6%;
    --bridge-w: 66%; --bridge-bottom: 7%; --bridge-shift: -38%;
  }
}
/* === Schwebe-Animation für die Buttons === */
.pill{
  /* Grundzustand */
  will-change: transform, box-shadow;
  animation: pill-float 6s ease-in-out infinite;
}

/* Leicht versetzte Phasen, wirkt natürlicher */
.hero__toggle .pill:nth-child(2){ animation-delay: 1.2s; }

/* Beim Hover dezent anheben & Animation pausieren */
.pill:hover{
  animation-play-state: paused;           /* schweben „anhalten“ */
  transform: translateY(-4px);            /* etwas höher als normaler Hover */
  box-shadow: 0 14px 28px rgba(0,0,0,.16),
              0 1px 0 rgba(255,255,255,.55) inset;
}

/* Klick-Feedback */
.pill:active{
  transform: translateY(-2px) scale(0.985);
}

/* Die eigentliche Bewegung */
@keyframes pill-float{
  0%,100%{
    transform: translateY(0);
    box-shadow: 0 8px 22px rgba(0,0,0,.14),
                0 1px 0 rgba(255,255,255,.55) inset;
  }
  50%{
    transform: translateY(-6px);          /* Hub – gern anpassen */
    box-shadow: 0 16px 30px rgba(0,0,0,.18),
                0 1px 0 rgba(255,255,255,.55) inset;
  }
}

/* Bewegung respektvoll reduzieren, wenn gewünscht */
@media (prefers-reduced-motion: reduce){
  .pill{ animation: none; }
}
/* Hover: leicht vergrößern + abdunkeln */
.pill{
  transition:
    transform .2s ease,
    box-shadow .2s ease,
    background-color .2s ease,
    filter .2s ease;
}

.pill:hover{
  animation-play-state: paused;
  transform: translateY(-6px) scale(1.04);      /* höher + größer */
  filter: brightness(0.97) saturate(1.05);      /* minimal dunkler/satter */
  box-shadow: 0 18px 34px rgba(0,0,0,.20),
              0 1px 0 rgba(255,255,255,.55) inset;
}

/* Klick-Feedback */
.pill:active{
  transform: translateY(-3px) scale(1.02);
  filter: brightness(1.95);
}

/* Tastaturfokus – sichtbar & hübsch */
.pill:focus-visible{
  outline: 2px solid rgba(0,0,0,.25);
  outline-offset: 2px;
}
/* Szene sanft verschieben, wenn Ergebnis gezeigt wird */
.scene{
  transition: transform .6s cubic-bezier(.22,.61,.36,1), margin-top .6s;
}
.hero.results .scene{
  transform: translateX(-50%) translateY(6%); /* Inseln nach unten */
}

/* Brücken-GIF deckungsgleich mit der PNG-Brücke */
.bridge, .bridge-gif{ transition: opacity .3s ease; }
.bridge-gif{
  position: absolute;
  width: var(--bridge-w);
  left: 50%;
  bottom: var(--bridge-bottom);
  transform: translateX(var(--bridge-shift)) rotate(0.3deg);
  z-index: 3;
  opacity: 0;
  pointer-events: none;
}
.hero.results .bridge{ opacity: 0; }         /* PNG ausblenden */
.hero.results .bridge-gif.show{ opacity: 1; }/* GIF einblenden */

/* Ergebnis-Badges */
.result{
  position:absolute;
  display:flex; gap:.5rem; align-items:center;
  padding:.55rem .8rem;
  background: rgba(255,255,255,.95);
  border-radius: 12px;
  font-weight:800;
  box-shadow: 0 14px 28px rgba(0,0,0,.18);
  opacity:0; transform: translateY(8px) scale(.96);
  transition: transform .25s ease, opacity .25s ease;
  z-index:4;
}
.result__label{ color:#275; opacity:.8; font-size:.9rem; }
.result__value{ color:#0a223a; font-size:1.05rem; }

/* Positionen der Badges relativ zur Szene – gern anpassen */
.result--left {  left: 18%; bottom: 44%; }
.result--right { right: 18%; bottom: 48%; }

/* anzeigen */
.hero.results .result.show{ opacity:1; transform: translateY(0) scale(1); }
/* === Ergebnis-Visualisierung (Szene schiebt runter, GIF & Badges) === */
.scene{
  transition: transform .6s cubic-bezier(.22,.61,.36,1);
}
.hero.results .scene{
  transform: translateX(-50%) translateY(6%); /* Inseln nach unten */
}

/* Brücken-GIF (liegt deckungsgleich über der PNG-Brücke) */
.bridge, .bridge-gif{ transition: opacity .3s ease; }
.bridge-gif{
  position: absolute;
  width: var(--bridge-w);
  left: 50%;
  bottom: var(--bridge-bottom);
  transform: translateX(var(--bridge-shift)) rotate(0.3deg);
  z-index: 3;
  opacity: 0;
  pointer-events: none;
}
.hero.results .bridge{ opacity: 0; }         /* PNG-Brücke ausblenden */
.hero.results .bridge-gif.show{ opacity: 1; }/* GIF einblenden */

/* Ergebnis-Badges */
.result{
  position:absolute;
  display:flex; gap:.5rem; align-items:center;
  padding:.55rem .8rem;
  background: rgba(255,255,255,.95);
  border-radius: 12px;
  font-weight:800;
  box-shadow: 0 14px 28px rgba(0,0,0,.18);
  opacity:0; transform: translateY(8px) scale(.96);
  transition: transform .25s ease, opacity .25s ease;
  z-index:4;
  pointer-events: none;
}
.result__label{ color:#275; opacity:.8; font-size:.9rem; }
.result__value{ color:#0a223a; font-size:1.05rem; }

/* Badge-Positionen (gern feintunen) */
.result--left  { left: 18%; bottom: 44%; }
.result--right { right:18%; bottom: 48%; }

/* anzeigen */
.hero.results .result.show{ opacity:1; transform: translateY(0) scale(1); }
/* Bridge-GIF deckungsgleich über der PNG-Brücke */
.bridge, .bridge-gif { transition: opacity .25s ease; }

.bridge-gif{
  position: absolute;
  width: var(--bridge-w);
  left: 50%;
  bottom: var(--bridge-bottom);
  transform: translateX(var(--bridge-shift)) rotate(0.3deg);
  z-index: 3;
  opacity: 0;                 /* startet unsichtbar */
  pointer-events: none;
}

/* Wenn wir das GIF zeigen, blenden wir die PNG aus */
.hero.show-gif .bridge-gif{ opacity: 1; }
/* erzwingt Sichtbarkeit der Brücke (GIF) */
.bridge { opacity: 1 !important; display: block !important; }
.bridge-gif          { opacity: 1 !important; }
/* PNG-Brücke sichtbar lassen */
.hero.show-gif .bridge { opacity: 1 !important; }

/* GIF einfach normal oben drüber legen */
.bridge      { z-index: 2; opacity: 1; }         /* PNG normal sichtbar */
.bridge-gif  {
  z-index: 3;
  opacity: 1;
  mix-blend-mode: normal !important;  /* <<< NICHT screen/multiply */
}

/* Falls irgendwo noch das Ausblenden steht, überschreiben: */
.hero.show-gif .bridge      { opacity: 1 !important; }  /* PNG bleibt sichtbar */
.hero.show-gif .bridge-gif  { opacity: 1 !important; }

.hero__title{ cursor: pointer; user-select: none; }

/* Signatur-Bild (Logo o.ä.) */
.sign-img {
  position: absolute;
  top: 10%;
  left: 50%;         /* or 50% for full centering */
  transform: translate(-50%, -50%);
  width: 6vw;
  height: auto;
  opacity: 0;
  transition: opacity 0.3s;
  z-index: 10;
}

.sign-text {
  position: absolute;
  top: 10%;
  transform: translateY(-50%);
  font-family: inherit; /* same as .hero__title */
  font-weight: 800;
  font-size: clamp(18px, 2vw, 32px);
  color: #fff;
  text-shadow: 0 3px 6px rgba(0,0,0,.30), 0 12px 32px rgba(0,50,120,.35);
  opacity: 0;
  transition: opacity 0.3s;
  z-index: 11;
  pointer-events: none;
  white-space: nowrap;
}
.sign-text--left {
  right: 58%; /* adjust as needed for spacing */
  text-align: right;
}
.sign-text--right {
  left: 58%;  /* adjust as needed for spacing */
  text-align: left;
}
/* ===== Mobile-Optimierungen ===== */

/* ≤ 640px hast du bereits – hier feintunen für sehr kleine Geräte */
@media (max-width: 480px){
  :root{
    /* Bühne kompakter machen */
    --hero-h: 105svh;
    --scene-ratio: 16/11;

    /* Inseln etwas kleiner & höher */
    --left-w: 82%;
    --left-left: -18%;
    --left-bottom: -4%;

    --right-w: 84%;
    --right-right: -20%;
    --right-bottom: -4%;

    /* Brücke leicht kleiner & tiefer */
    --bridge-w: 62%;
    --bridge-bottom: 6%;
    --bridge-shift: -36%;
  }

  .hero{
    grid-template-rows: auto auto 1fr;
    padding-top: clamp(18px, 5vh, 40px);
  }

  .hero__title{
    font-size: clamp(32px, 9vw, 54px);
    line-height: 1.05;
    margin-inline: 10px;
  }

  .hero__toggle{
    gap: clamp(14px, 4vw, 22px);
    margin-top: clamp(10px, 2.5vh, 18px);
  }

  /* Touch-Zielgröße + bessere Lesbarkeit */
  .pill{
    padding: 0.9rem 1.15rem;
    font-size: clamp(16px, 4.2vw, 18px);
    border-radius: 14px;
    min-height: 44px;          /* Apple/Material Guideline */
    letter-spacing: .2px;
  }

  /* Szene etwas niedriger wirken lassen, damit Buttons/Titel Luft haben */
  .scene{ margin-top: clamp(8px, 2.4vh, 16px); }
}

/* sehr kleine Geräte (z. B. iPhone SE) */
@media (max-width: 360px){
  :root{
    --scene-ratio: 16/12;
    --bridge-w: 60%;
    --bridge-bottom: 7%;
    --bridge-shift: -37%;
  }

  /* Pills untereinander stapeln, wenn horizontal zu eng */
  .hero__toggle{
    flex-direction: column;
    align-items: center;
    gap: 10px;
    width: min(92vw, 420px);
  }
  .hero__toggle .pill{
    width: 100%;
    text-align: center;
  }

  .hero__title{ font-size: clamp(28px, 9.8vw, 44px); }
}

/* leichte Performance/Lesbarkeits-Reduktion der Schatten auf Handy */
@media (max-width: 640px){
  .scene img{
    filter:
      drop-shadow(0 18px 28px rgba(0,40,80,.22))
      drop-shadow(0 6px 12px rgba(0,0,0,.12));
  }
  .bridge{
    filter:
      drop-shadow(0 18px 26px rgba(0,30,60,.30))
      drop-shadow(0 6px 12px rgba(0,0,0,.16));
  }
}

/* Wenn Ergebnisse gezeigt werden, Szene auf Handy etwas weniger weit nach unten schieben */
@media (max-width: 480px){
  .hero.results .scene{
    transform: translateX(-50%) translateY(4%);
  }
}

/* Sign & Zahlen etwas größer auf Handy */
@media (max-width: 480px){
  .sign-img{ width: 10vw; min-width: 48px; }
  .sign-text{
    font-size: clamp(16px, 4.4vw, 20px);
  }
}
/* ===== Mobile Anpassung: Inseln & Brücke dichter ===== */
@media (max-width: 640px){
  :root{
    /* Inseln größer und etwas höher */
    --left-w: 115%;      /* vorher ~70% */
    --left-left: -25%;   /* leicht weiter zur Mitte */
    --left-bottom: -8%;

    --right-w: 118%;     /* vorher ~72% */
    --right-right: -30%; /* näher an Brücke */
    --right-bottom: -8%;

    /* Brücke etwas höher und leicht nach rechts */
    --bridge-w: 72%;     /* größer, damit sie Malmö berührt */
    --bridge-bottom: 5%;
    --bridge-shift: -38%; /* Position feintunen */
  }
}
/* ==== Mobile-Override NUR für Größen/Position ==== */
/* etwas großzügigeres Breakpoint, falls dein Viewport > 640 ist */
/* === MOBILE FIX: Inseln größer + Malmö weiter rechts === */
@media (max-width: 768px){
  :root{
    /* Linke Insel (Kopenhagen) – größer & etwas höher */
    --left-w: 145% !important;
    --left-left: -26% !important;
    --left-bottom: -10% !important;

    /* Rechte Insel (Malmö) – größer & weiter nach rechts verschoben */
    --right-w: 150% !important;
    --right-right: -42% !important;
    --right-bottom: 2% !important;

    /* Brücke – etwas größer & leicht verschoben, damit sie Malmö trifft */
    --bridge-w: 70% !important;
    --bridge-bottom: 8% !important;
    --bridge-shift: -30% !important;
  }
}

#rateChart {
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  bottom: -30vh;
  width: min(64vw, 720px);   /* weniger breit: max 720px oder 64vw */
  max-width: 720px;
  height: auto;
  max-height: 40vh;         /* ggf. anpassen */
  z-index: 0;
  pointer-events: none;
  background: transparent;
}

/* Falls du möchtest, dass die Szene weiterhin über dem Chart liegt */
.scene { z-index: 1; }
